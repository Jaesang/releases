
<!doctype html>
<html lang="kr" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-7.3.6">
    
    
      
        <title>Quick Start - SKT Container Platform</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.a57b2b03.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans+Korean:300,400,400i,700%7C&display=fallback">
        <style>:root{--md-text-font-family:"Noto Sans Korean";--md-code-font-family:""}</style>
      
    
    
    
      <link rel="stylesheet" href="../../assets/css/extra.css">
    
    
      


    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
      <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#quick-start" class="md-skip">
          콘텐츠로 이동
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="SKT Container Platform" class="md-header__button md-logo" aria-label="SKT Container Platform" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SKT Container Platform
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Quick Start
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="검색" placeholder="검색" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="검색">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" aria-label="공유" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" aria-label="지우기" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            검색 초기화
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/openinfradev/releases/" title="저장소로 이동" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    openinfradev/releases
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Welcome
    </a>
  </li>

      
        
  
  
    
  


  <li class="md-tabs__item">
    <a href="./" class="md-tabs__link md-tabs__link--active">
      Quick Start
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../releasenotes/1-0-0/" class="md-tabs__link">
      Release Notes
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../architecture/overviewarch/" class="md-tabs__link">
        Architecture
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../cli/overview/" class="md-tabs__link">
        CLI manual (v0.1.2)
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../api/1-0-0/" class="md-tabs__link">
      API manual
    </a>
  </li>

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="SKT Container Platform" class="md-nav__button md-logo" aria-label="SKT Container Platform" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    SKT Container Platform
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/openinfradev/releases/" title="저장소로 이동" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    openinfradev/releases
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Welcome
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Quick Start
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Quick Start
      </a>
      
        


<nav class="md-nav md-nav--secondary" aria-label="목차">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      목차
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    Summary
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequsition" class="md-nav__link">
    Prerequsition
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#admin-clutser-bootstrap" class="md-nav__link">
    Admin Clutser Bootstrap
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#admin-cluster-postconfig" class="md-nav__link">
    Admin Cluster Postconfig
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user-cluster-creation" class="md-nav__link">
    User Cluster Creation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#service-creation" class="md-nav__link">
    Service Creation
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../releasenotes/1-0-0/" class="md-nav__link">
        Release Notes
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" data-md-state="indeterminate" type="checkbox" id="__nav_4" checked>
      
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4">
          Architecture
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Architecture" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Architecture
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/overviewarch/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/tksgitops/" class="md-nav__link">
        GitOps Architecture
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/awsarch/" class="md-nav__link">
        AWS Ref. Architecture
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" data-md-state="indeterminate" type="checkbox" id="__nav_5" checked>
      
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_5">
          CLI manual (v0.1.2)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="CLI manual (v0.1.2)" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          CLI manual (v0.1.2)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/install/" class="md-nav__link">
        Installation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/configuration/" class="md-nav__link">
        Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_4" data-md-state="indeterminate" type="checkbox" id="__nav_5_4" checked>
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_5_4">
          Command
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Command" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_4">
          <span class="md-nav__icon md-icon"></span>
          Command
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/tks_cluster/" class="md-nav__link">
        tks cluster
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/tks_service/" class="md-nav__link">
        tks service
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../api/1-0-0/" class="md-nav__link">
        API manual
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/openinfradev/releases/edit/master/docs/quickstart/1-0-0.md" title="이 페이지를 편집" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="quick-start">Quick Start<a class="headerlink" href="#quick-start" title="Permanent link">&para;</a></h1>
<h2 id="summary">Summary<a class="headerlink" href="#summary" title="Permanent link">&para;</a></h2>
<ul>
<li>release 1.0.0 기준   </li>
<li>AWS 기준  </li>
</ul>
<p>TKS는 Cluster API를 활용하여 Public Cloud Infra를 제어 한다. Admin Clutser는 Public Cloud를 제어하고, Decapod가 설치되어 User Cluster를 생성하고 User Clutser에 설치되는 Service를 설치관리하는 주체다.
TKS는 Admin Clutser를 쉽게 구축할수 있는 Bootstrap Server를 제공한다. Bootrap Server는 Admin Cluster를 추국하기 위핸 Artifect를 가지고 Admin Cluster를 생성한다. Bootstrap Sever는 Admin Clutser 생성 후, 그 용도가 없을으로 삭제해도 된다.
Admin Clutser 생성 후, Admin Cluster는 TKS의 기능을 gRPC API로 제공한다. 또한 기본적으로 gRPC를 호출하는 CLI를 제공함으로 사용자는 CLI를 통해 User Cluster를 생성하고, 생성된 User Cluster에 Service를 생성 할 수 있다.</p>
<p><img alt="bootstrap" src="../../assets/images/tks-intall-step.png" /></p>
<h2 id="prerequsition">Prerequsition<a class="headerlink" href="#prerequsition" title="Permanent link">&para;</a></h2>
<p>TKS를 설치하기 위해서는 몇가지 미리 준배해야 할 사항이 있다.</p>
<ul>
<li>Bootrap Server : Ubuntu 20.04 , 최소 설치 필요 CLI Tool : vim, git, curl</li>
<li>TKS 사용을 위한 AWS policy 생성: <a href="../../assets/files/tks-capa.json">tks-capa.json</a>, <a href="../../assets/files/tks-node.json">tks-node.json</a>, <a href="../../assets/files/tks-ec2.json">tks-ec2.json</a>, <a href="../../assets/files/tks-s3.json">tks-s3.json</a></li>
<li>TKS 사용을 위한 AWS policy가 적용된 AWS IAM User 생성 및 ACCESS KEY 생성 (ID, KEY Pair)</li>
<li>GitOps를 위한 Github Account 생성 (Quick Start는 Test요으로 Public Repo 사용가능. 상용일 경우 Private Repo 생성 필요. 별도 Github Plane 가입필요함)</li>
<li>Github Account 토큰</li>
<li>Node들이 사용할 ssh pem 생성 후, AWS에 등록 (e.g quickstart)</li>
</ul>
<h2 id="admin-clutser-bootstrap">Admin Clutser Bootstrap<a class="headerlink" href="#admin-clutser-bootstrap" title="Permanent link">&para;</a></h2>
<p>Bootstrap Server를 설치하고 Admin Cluster를 설치한다.</p>
<ul>
<li>Ubuntu 20.04 기준 Linux Machine 설치 후, 필요한 CLI Tool 설치         </li>
<li>Bootstrap을 실행 하기 위한 script download <br />
<div class="highlight"><pre><span></span><code>git clone https://github.com/openinfradev/tks-mgmt-cluster-deploy.git -b release-v2
</code></pre></div></li>
<li>
<p>Pem 파일 생성 : AWS에 등록한 이름과 같은 이름으로 생성
<div class="highlight"><pre><span></span><code><span class="nb">cd</span> tks-mgmt-cluster-deploy/
vi quickstart.pem
sudo chmod <span class="m">400</span> quickstart.pem
</code></pre></div></p>
</li>
<li>
<p>Bootstrap script 실행을 위한 설정 : conf.sh 
<div class="highlight"><pre><span></span><code>cp conf.sh.example conf.sh
</code></pre></div>
conf.sh의 {}에 설치 환경에 맞게 값 변경
<div class="highlight"><pre><span></span><code><span class="nv">TKS_RELEASE</span><span class="o">=</span>v2.0.0-rc1

<span class="nv">CAPI_INFRA_PROVIDER</span><span class="o">=</span><span class="s2">&quot;aws&quot;</span> <span class="c1"># aws or openstack</span>
<span class="c1"># when &#39;aws&#39; is an infrastructure provider</span>
<span class="nv">AWS_REGION</span><span class="o">={</span>Admin Cluster 설치 Region<span class="o">}</span>
<span class="nv">AWS_ACCESS_KEY_ID</span><span class="o">={</span>AWS ACCESS KEY ID
<span class="nv">AWS_SECRET_ACCESS_KEY</span><span class="o">={</span>AWS ACESS KEY<span class="o">}</span>

<span class="nv">GITHUB_USERNAME</span><span class="o">={</span>미리 만든 Github Accunt<span class="o">(</span>Organization<span class="o">)</span> Name<span class="o">}</span>
<span class="nv">GITHUB_TOKEN</span><span class="o">={</span>미리 만든 Github Accont<span class="o">(</span>Organization<span class="o">)</span>의 TOKEN<span class="o">}</span>
</code></pre></div></p>
</li>
<li>Admin Cluster Spec 설정:<br />
<div class="highlight"><pre><span></span><code><span class="nb">cd</span> helm-values/
cp example-aws-admin.vo aws-admin.vo
</code></pre></div>
aws-admin.vo의 {}에 설치환경에 맞게 값 변경
<div class="highlight"><pre><span></span><code>sshKeyName: quickstart

cluster:
  name: <span class="o">{</span>Your value<span class="o">}</span>
  region: <span class="o">{</span>Your value<span class="o">}</span>
  kubernetesVersion: v1.22.8
  podCidrBlocks:
  - <span class="m">192</span>.168.0.0/16
  bastion:
    enabled: <span class="nb">true</span>
    instanceType: t3.micro
  baseOS: ubuntu-20.04

kubeadmControlPlane:
  replicas: <span class="m">3</span>
  controlPlaneMachineType: t3.large
  rootVolume:
    size: <span class="m">20</span>
    type: gp2

machinePool:
- name: <span class="o">{</span>Your value<span class="o">}</span>
  machineType: t3.2xlarge
  replicas: <span class="m">3</span>
  minSize: <span class="m">1</span>
  maxSize: <span class="m">10</span>
  rootVolume:
    size: <span class="m">200</span>
    type: gp2
  subnets: <span class="o">[]</span>
  labels:
    taco-tks: enabled
</code></pre></div></li>
<li>Admin Cluster Bootstrap Script 실행 <br />
<div class="highlight"><pre><span></span><code><span class="nb">cd</span> ..
./01_prepare_assets.sh
</code></pre></div>
asset-YYYY-MM-DD 이름을 갖는 Directory가 생상되고 Admin Cluster 생성을 위한 Artifacts 이 다운로드됨.
<div class="highlight"><pre><span></span><code>./02_create_bootstrap_cluster.sh assets-YYYY-MM-DD
</code></pre></div>
Bootstrap Sever는 Cluster API를 사용하여 Admin Cluster를 생성 함. 따라서 K3S를 설치하게 된다.
아래와 같이 동작 확인가능하다.
<div class="highlight"><pre><span></span><code>kubectl --kubeconfig ~/.kube/config get node
NAME               STATUS   ROLES                  AGE     VERSION
ip-???-??-??-???   Ready    control-plane,master   2m50s   v1.23.5+k3s1
</code></pre></div>
설치된 K3S에 Cluster API for AWS provider를 설치한다.
<div class="highlight"><pre><span></span><code>./03_initialize_capi_providers.sh assets-YYYY-MM-DD
</code></pre></div>
AWS에 Admin Cluster로 사용한 K8S Cluster를 생성한다. <br />
<div class="highlight"><pre><span></span><code> ./04_create_tks-admin_cluster.sh  assets-YYYY-MM-DD ./helm-values/aws-admin.vo
</code></pre></div>
Admin Clutser용 K8S Cluster 동작확인 <br />
<div class="highlight"><pre><span></span><code>kubectl --kubeconfig ~/.kube/config get awscluster -A
</code></pre></div>
Admin Cluster에 접근하기 위핸 Kubeconfig 화일이 kubeconfig_{정의한이름} 으로 생성됨 <br />
<div class="highlight"><pre><span></span><code>kubectl --kubeconfig kubeconfig_<span class="o">{</span>정의한이름<span class="o">}</span> get node
NAME                                              STATUS     ROLES                  AGE   VERSION
ip-10-0-120-101.ap-northeast-2.compute.internal   NotReady   &lt;none&gt;                 13m   v1.22.8
ip-10-0-126-250.ap-northeast-2.compute.internal   NotReady   control-plane,master   14m   v1.22.8
ip-10-0-173-233.ap-northeast-2.compute.internal   NotReady   &lt;none&gt;                 13m   v1.22.8
ip-10-0-191-126.ap-northeast-2.compute.internal   NotReady   control-plane,master   12m   v1.22.8
ip-10-0-214-182.ap-northeast-2.compute.internal   NotReady   &lt;none&gt;                 13m   v1.22.8
ip-10-0-222-105.ap-northeast-2.compute.internal   NotReady   control-plane,master   15m   v1.22.8
</code></pre></div>
Decapod 설치 <br />
<div class="highlight"><pre><span></span><code> ./05_install_decapod.sh assets-YYYY-MM-DD
</code></pre></div>
Keycloak 설치
<div class="highlight"><pre><span></span><code>./05_z1_install_keycloak.sh
</code></pre></div>
Ingress Controller설치
<div class="highlight"><pre><span></span><code>./05_z2_install_nginx_ingress.sh
</code></pre></div>
생성된 Admin Clutser가 스스로를 Cluster API로 management하게 Pivoting
<div class="highlight"><pre><span></span><code>./06_make_tks-admin_self-managing.sh quickstart.pem
...
...
<span class="o">===</span> Finished. Check the status of all cluster API resources <span class="k">in</span> the admin cluster and use the bastion host: <span class="m">999</span>.999.999.999 <span class="o">===</span>
</code></pre></div>
Admin Cluster의 Bastion node의 IP을 얻을 수 있음을 확인할 수 있다.</li>
</ul>
<h2 id="admin-cluster-postconfig">Admin Cluster Postconfig<a class="headerlink" href="#admin-cluster-postconfig" title="Permanent link">&para;</a></h2>
<p>Admin Cluster를 사용하기 위해 CLI tool을 Admin Cluster의 Bastion node에 설치 하고, Admin Cluster의 GitOps 설정을 완료한다.
Admin Cluster의 Bastion Node로 Login
<div class="highlight"><pre><span></span><code>ssh -i quickstart.pem ubuntu@999.999.999.999
</code></pre></div>
Install kubectl
<div class="highlight"><pre><span></span><code>curl -LO <span class="s2">&quot;https://dl.k8s.io/release/</span><span class="k">$(</span>curl -L -s https://dl.k8s.io/release/stable.txt<span class="k">)</span><span class="s2">/bin/linux/amd64/kubectl&quot;</span>
sudo install -o root -g root -m <span class="m">0755</span> kubectl /usr/local/bin/kubectl
cp ~/tks-mgmt-cluster-deploy/ kubeconfig_<span class="o">{</span>설정한값<span class="o">}</span> ~/.kube/config
</code></pre></div>
Install helm
<div class="highlight"><pre><span></span><code>curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3
chmod <span class="m">700</span> get_helm.sh
./get_helm.sh
</code></pre></div>
Install API Services
<div class="highlight"><pre><span></span><code>kubectl create ns tks
kubectl label no ip-10-0-120-101.ap-northeast-2.compute.internal taco-tks<span class="o">=</span>enabled
helm repo add tks https://openinfradev.github.io/helm-repo
helm repo update
helm install tks-contract tks/tks-contract -n tks
helm install tks-info tks/tks-info -n tks
helm install tks-cluster-lcm tks/tks-cluster-lcm -n tks
helm install tks-batch tks/tks-batch -n tks
</code></pre></div>
Install CLI <br />
<a href="../../cli/install/">CLI Install</a> <br />
<a href="../../cli/configuration/">CLI Config</a> <br />
CLI 동작확인
<div class="highlight"><pre><span></span><code>tks cluster list
</code></pre></div></p>
<h2 id="user-cluster-creation">User Cluster Creation<a class="headerlink" href="#user-cluster-creation" title="Permanent link">&para;</a></h2>
<h2 id="service-creation">Service Creation<a class="headerlink" href="#service-creation" title="Permanent link">&para;</a></h2>
                
              
              
                


              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            맨위로
          </a>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../.." class="md-footer__link md-footer__link--prev" aria-label="이전: Welcome" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                이전
              </span>
              Welcome
            </div>
          </div>
        </a>
      
      
        
        <a href="../../releasenotes/1-0-0/" class="md-footer__link md-footer__link--next" aria-label="다음: Release Notes" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                다음
              </span>
              Release Notes
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        
          Made with
          <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
            Material for MkDocs
          </a>
        
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.indexes", "navigation.instant", "navigation.top", "navigation.tracking", "navigation.instant", "navigation.tabs", "navigation.tabs.sticky", "navigation.expand", "toc.integrate", "content.code.annotate", "content.tabs.link", "search.highlight", "search.share", "search.suggest"], "translations": {"clipboard.copy": "\ud074\ub9bd\ubcf4\ub4dc\ub85c \ubcf5\uc0ac", "clipboard.copied": "\ud074\ub9bd\ubcf4\ub4dc\uc5d0 \ubcf5\uc0ac\ub428", "search.config.lang": "en", "search.config.pipeline": " ", "search.config.separator": "[\\s\\-]+", "search.placeholder": "\uac80\uc0c9", "search.result.placeholder": "\uac80\uc0c9\uc5b4\ub97c \uc785\ub825\ud558\uc138\uc694", "search.result.none": "\uac80\uc0c9\uc5b4\uc640 \uc77c\uce58\ud558\ub294 \ubb38\uc11c\uac00 \uc5c6\uc2b5\ub2c8\ub2e4", "search.result.one": "1\uac1c\uc758 \uc77c\uce58\ud558\ub294 \ubb38\uc11c", "search.result.other": "#\uac1c\uc758 \uc77c\uce58\ud558\ub294 \ubb38\uc11c", "search.result.more.one": "\uc774 \ubb38\uc11c\uc5d0\uc11c 1\uac1c\uc758 \uac80\uc0c9 \uacb0\uacfc \ub354 \ubcf4\uae30", "search.result.more.other": "\uc774 \ubb38\uc11c\uc5d0\uc11c #\uac1c\uc758 \uac80\uc0c9 \uacb0\uacfc \ub354 \ubcf4\uae30", "search.result.term.missing": "\ud3ec\ud568\ub418\uc9c0 \uc54a\uc740 \uac80\uc0c9\uc5b4", "select.version.title": "\ubc84\uc804 \uc120\ud0dd"}, "search": "../../assets/javascripts/workers/search.fcfe8b6d.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.b1047164.min.js"></script>
      
    
  </body>
</html>